(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{1960:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.editable?i("div",{staticClass:"row"},[i("span",{staticClass:"col-sm-2 col-xs-1"},[t._t("default")],2),i("span",{staticClass:"col"},[i("q-slider",{attrs:{value:t.currentProb,min:.001,max:.999,step:.001,color:t.color,label:"","label-value":t.percent(t.currentProb),"label-always":""},on:{input:t.setProb}})],1)]):i("div",{staticClass:"row justify-between align-center rounded-borders",style:t.probStyle},[i("span",{staticClass:"overflow-hidden q-pl-sm"},[t._t("default")],2),i("span",[t._v("\n      "+t._s(t.percent(t.currentProb))+"\n    ")])])])},s=[],o=i("bc78"),r={name:"ProbabilityBar",props:{value:{type:Number,required:!0},color:{type:String,default:"primary"},editable:Boolean},data:function(){return{currentProb:this.value}},watch:{value(t){this.currentProb=t}},computed:{probStyle:function(){var t=this.percent(this.currentProb/2),e=this.percent(this.currentProb),i=o["a"].getBrand(this.color),n=o["a"].lighten(i,25);return{background:"linear-gradient(90deg,"+n+" 0%,"+n+" "+t+", white "+e+")"}}},methods:{percent:function(t){return(100*t).toFixed(1)+"%"},setProb:function(t){this.currentProb=t,this.$emit("input",this.currentProb)}}},a=r,c=i("2877"),l=i("c1d0"),u=i("eebe"),d=i.n(u),p=Object(c["a"])(a,n,s,!1,null,null,null);e["a"]=p.exports;d()(p,"components",{QSlider:l["a"]})},"491b":function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return l})),i.d(e,"a",(function(){return a}));i("13d5");var n=i("ded3"),s=i.n(n);function o(t,e){return t.id in e.likelihood?e.likelihood[t.id].prob:0}function r(t,e,i){const n=t.map((t=>t.id)),r=Object.keys(e.likelihood).map((t=>parseInt(t))).filter((t=>!(t in n)));r&&i&&r.forEach((e=>{const n=i.find((t=>t.id===e));console.log("Re-adding hypothesis ",n),t=a(t,n)}));var l=t.map((t=>s()(s()({},t),{},{prob:t.prob*o(t,e)})));return c(l)}function a(t,e){var i=t.map((t=>s()(s()({},t),{},{prob:t.prob*(1-e.prob)})));return 0===i.length&&(e.prob=1),i.push(e),i}function c(t){const e=t.reduce(((t,e)=>t+e.prob),0);return t.map((t=>s()(s()({},t),{},{prob:t.prob/e})))}function l(t,e){const i=c(t.filter((t=>t.id in e.likelihood))),n=i.map((t=>s()(s()({},t),{},{prob:t.prob/o(t,e)})));return c(n)}},"4c78":function(t,e,i){"use strict";i("7c51")},"7c51":function(t,e,i){},"90b2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md"},[i("h4",[t._v(" "+t._s(t.question.name)+" ")]),i("h5",[t._v(" Current beliefs ")]),i("div",{staticClass:"column q-gutter-sm"},t._l(t.question.hypothesis,(function(e){return i("probability-bar",{key:e.id,attrs:{color:"primary",value:e.prob}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),1),0===t.question.evidences.length?i("h5",[t._v(" No past events ")]):i("div",[i("h5",[t._v(" Past events ")]),i("div",{staticClass:"column"},t._l(t.question.evidences.slice().reverse(),(function(e){return i("q-card",{key:e.id,staticClass:"evidences"},[i("q-card-section",{staticClass:"q-gutter-sm"},[i("div",{staticClass:"row items-center no-wrap"},[i("div",{staticClass:"col"},[i("div",{staticClass:"text-subtitle6"},[t._v(t._s(e.name))])]),i("div",{staticClass:"col-auto"},[i("q-btn",{attrs:{color:"grey-7",round:"",flat:"",icon:"clear"},on:{click:function(i){return t.deleteEvent(e.id)}}})],1)]),t._l(e.likelihood,(function(e,n){return i("probability-bar",{key:n,attrs:{color:"secondary",value:e.prob}},[t._v("\n            "+t._s(t._f("getName")(t.question.hypothesis,n))+"\n          ")])})),i("div",{staticClass:"text-grey"},[t._v(t._s(t._f("calendar")(e.date)))])],2)],1)})),1)]),i("div",{staticClass:"row"},[i("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[i("q-btn",{attrs:{fab:"",icon:"add",color:"accent"}},[i("q-menu",{attrs:{"auto-close":""}},[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{attrs:{clickable:"",disable:0===t.question.hypothesis.length,to:{name:"add-evidence",params:{questionId:t.question.id}}}},[i("q-item-section",[t._v("Add event")])],1),i("q-item",{attrs:{clickable:"",disable:t.isYesNo(t.question),to:{name:"add-hypothesis",params:{questionId:t.question.id}}}},[i("q-item-section",[t._v("Add hypothesis")])],1)],1)],1)],1)],1)],1)])},s=[],o=(i("13d5"),i("26e9"),i("fb6a"),i("a434"),i("18d6")),r=i("1960"),a=i("491b"),c={name:"Question",components:{ProbabilityBar:r["a"]},data:function(){var t=o["a"].getItem("question/"+this.questionId);return{question:t}},filters:{getName:function(t,e){return t.find((t=>t.id===parseInt(e,10))).name}},methods:{isYesNo:function(t){const e=t.hypothesis;return 2===e.length&&"yes"===e[0].name&&"no"===e[1].name},deleteEvent:function(t){const e=this.question.evidences.findIndex((e=>e.id===t)),i=this.question.evidences.slice(e).reverse(),{initials:n,hypothesis:s}=i.reduce((({initials:t,hypothesis:e},i)=>({initials:t.concat(e.filter((t=>!(t.id in i.likelihood)))),hypothesis:Object(a["b"])(e,i)})),{initials:[],hypothesis:this.question.hypothesis});console.log("original hypothesis before the removed evidence: ",s);const r=this.question.evidences.slice(e+1),c=(t,e)=>Object(a["c"])(t,e,n);this.question.hypothesis=r.reduce(c,s),this.question.evidences.splice(e,1),o["a"].set("question/"+this.question.id,this.question)}},props:["questionId"]},l=c,u=(i("4c78"),i("2877")),d=i("f09f"),p=i("a370"),h=i("9c40"),b=i("de5e"),v=i("4e73"),f=i("1c1c"),m=i("66e5"),q=i("4074"),y=i("eebe"),_=i.n(y),g=Object(u["a"])(l,n,s,!1,null,null,null);e["default"]=g.exports;_()(g,"components",{QCard:d["a"],QCardSection:p["a"],QBtn:h["a"],QPageSticky:b["a"],QMenu:v["a"],QList:f["a"],QItem:m["a"],QItemSection:q["a"]})}}]);